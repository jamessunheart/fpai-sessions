# REGISTRY - Technical Specification
**Droplet #1** | **Port 8000** | **Status: DEPLOYED**

*Auto-generated by session-1763235028 - Autonomous Value Creation Spree*

## Purpose
Central identity and service directory for Full Potential AI mesh architecture. Single source of truth (SSOT) for all droplet registration, discovery, and authentication.

## Core Capabilities
- **Service Discovery:** Maintains directory of all registered droplets
- **Identity Management:** Issues JWT tokens for inter-service auth
- **Health Monitoring:** Tracks service health via heartbeats
- **SSOT:** Central truth about what services exist and their status

## UBIC Endpoints
✅ `/health` - Registry health status
✅ `/capabilities` - Registry capabilities (registration, auth, discovery)
✅ `/state` - Current registered services count
✅ `/dependencies` - None (Registry has no dependencies)
✅ `/message` - Inter-service messaging

## Service Endpoints

### `POST /droplets/register`
Register a new service
```json
{
  "droplet_id": 20,
  "name": "i-proactive",
  "port": 8400,
  "capabilities": ["multi-agent", "memory"],
  "status": "active"
}
```

### `GET /droplets`
List all registered services
```json
{
  "droplets": [...],
  "total": 8
}
```

### `POST /droplets/heartbeat`
Service liveness signal
```json
{
  "droplet_id": 20,
  "status": "active"
}
```

### `POST /auth/token`
Generate JWT for inter-service auth
```json
{
  "service": "i-proactive",
  "token": "eyJ..."
}
```

## Architecture
- **Database:** SQLite (local) or PostgreSQL (production)
- **Auth:** JWT-based service authentication
- **Caching:** In-memory cache for frequently accessed data
- **Heartbeat Cleanup:** Auto-remove stale services (>5min no heartbeat)

## Deployment
```bash
docker run -d --name registry -p 8000:8000 \
  -v /opt/fpai/data:/app/data \
  fpai-registry
```

**Foundation service - all others depend on this!**
