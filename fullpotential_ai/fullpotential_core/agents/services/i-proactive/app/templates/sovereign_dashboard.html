<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sovereign AI Dashboard - Full Potential AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .status-item {
            padding: 10px 20px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.green {
            background: #00ff88;
            box-shadow: 0 0 10px #00ff88;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .card h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #00d4ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .agent-grid {
            display: grid;
            gap: 10px;
        }

        .agent {
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 5px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .agent-name {
            font-weight: bold;
            color: #00d4ff;
        }

        .agent-role {
            font-size: 0.9em;
            color: #888;
        }

        .agent-status {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 0.8em;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: #888;
        }

        .metric-value {
            font-weight: bold;
            color: #00ff88;
        }

        .metric-value.highlight {
            color: #00d4ff;
            font-size: 1.2em;
        }

        .orchestration-flow {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .flow-item {
            background: rgba(123, 47, 247, 0.1);
            border-left: 3px solid #7b2ff7;
            padding: 10px 15px;
            border-radius: 5px;
        }

        .flow-arrow {
            text-align: center;
            color: #7b2ff7;
            font-size: 1.5em;
        }

        .cost-savings {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 212, 255, 0.1));
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .big-number {
            font-size: 3em;
            font-weight: bold;
            background: linear-gradient(90deg, #00ff88, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .refresh-time {
            text-align: center;
            color: #888;
            font-size: 0.9em;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üåê‚ö°üíé Sovereign AI Dashboard</h1>
        <p>100% Local AI Infrastructure - Zero Corporate Dependency</p>
    </div>

    <div class="status-bar">
        <div class="status-item">
            <div class="status-dot green"></div>
            <span>I PROACTIVE Active</span>
        </div>
        <div class="status-item">
            <div class="status-dot green"></div>
            <span>Ollama Serving</span>
        </div>
        <div class="status-item">
            <div class="status-dot green"></div>
            <span>Autonomous Mode</span>
        </div>
        <div class="status-item">
            <div class="status-dot green"></div>
            <span>Optimization Active</span>
        </div>
    </div>

    <div class="grid">
        <!-- CrewAI Agents -->
        <div class="card">
            <h2>üë• Sovereign AI Agents</h2>
            <div class="agent-grid">
                <div class="agent">
                    <div>
                        <div class="agent-name">üëî Strategist</div>
                        <div class="agent-role">Strategic Planning</div>
                    </div>
                    <div class="agent-status" id="strategist-status">READY</div>
                </div>
                <div class="agent">
                    <div>
                        <div class="agent-name">üî® Builder</div>
                        <div class="agent-role">Code Generation</div>
                    </div>
                    <div class="agent-status" id="builder-status">READY</div>
                </div>
                <div class="agent">
                    <div>
                        <div class="agent-name">‚ö° Optimizer</div>
                        <div class="agent-role">Performance Tuning</div>
                    </div>
                    <div class="agent-status" id="optimizer-status">READY</div>
                </div>
                <div class="agent">
                    <div>
                        <div class="agent-name">üöÄ Deployer</div>
                        <div class="agent-role">DevOps Tasks</div>
                    </div>
                    <div class="agent-status" id="deployer-status">READY</div>
                </div>
                <div class="agent">
                    <div>
                        <div class="agent-name">üìä Analyzer</div>
                        <div class="agent-role">Data Analysis</div>
                    </div>
                    <div class="agent-status" id="analyzer-status">READY</div>
                </div>
            </div>
        </div>

        <!-- System Metrics -->
        <div class="card">
            <h2>üìä System Metrics</h2>
            <div class="metric">
                <span class="metric-label">Status</span>
                <span class="metric-value" id="system-status">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Uptime</span>
                <span class="metric-value" id="uptime">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Active Tasks</span>
                <span class="metric-value" id="active-tasks">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Completed Tasks</span>
                <span class="metric-value highlight" id="completed-tasks">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Memory Usage</span>
                <span class="metric-value" id="memory">Loading...</span>
            </div>
        </div>

        <!-- Autonomous Operations -->
        <div class="card">
            <h2>ü§ñ Autonomous Operations</h2>
            <div class="metric">
                <span class="metric-label">Mode</span>
                <span class="metric-value" id="autonomous-mode">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Last Check</span>
                <span class="metric-value" id="last-check">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Check Interval</span>
                <span class="metric-value" id="check-interval">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Actions Taken</span>
                <span class="metric-value highlight" id="actions-taken">Loading...</span>
            </div>
        </div>

        <!-- Optimization Stats -->
        <div class="card">
            <h2>‚ö° Optimization Engine</h2>
            <div class="metric">
                <span class="metric-label">Cache Size</span>
                <span class="metric-value" id="cache-size">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Cache Hits</span>
                <span class="metric-value" id="cache-hits">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Cache Misses</span>
                <span class="metric-value" id="cache-misses">Loading...</span>
            </div>
            <div class="metric">
                <span class="metric-label">Hit Rate</span>
                <span class="metric-value highlight" id="hit-rate">Loading...</span>
            </div>
        </div>

        <!-- Orchestration Flow -->
        <div class="card">
            <h2>üîÑ Orchestration Flow</h2>
            <div class="orchestration-flow">
                <div class="flow-item">üì• <strong>Request Received</strong> ‚Üí FastAPI (main.py)</div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-item">üéØ <strong>Route Decision</strong> ‚Üí Task or Direct AI Call?</div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-item">üë• <strong>CrewManager</strong> ‚Üí Orchestrates 5 agents (if task)</div>
                <div class="flow-item">ü§ñ <strong>ModelRouter</strong> ‚Üí Direct AI call (if simple)</div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-item">‚ö° <strong>OptimizationEngine</strong> ‚Üí Cache check + monitoring</div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-item">üåê <strong>Ollama (Llama 3.1 8B)</strong> ‚Üí Local inference</div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-item">üì§ <strong>Response Delivered</strong> ‚Üí $0 cost, 100% local</div>
            </div>
        </div>

        <!-- Cost Savings -->
        <div class="card">
            <h2>üí∞ Economic Impact</h2>
            <div class="cost-savings">
                <div class="big-number">$0</div>
                <div style="font-size: 1.2em; margin: 10px 0;">AI Cost per Month</div>
                <div style="color: #888;">Was: $250-1,200/month</div>
                <div style="margin-top: 20px; font-size: 1.5em; color: #00ff88;">
                    Annual Savings: $3,000-14,400
                </div>
            </div>
        </div>
    </div>

    <div class="refresh-time">
        Auto-refreshing every 10 seconds | Last update: <span id="last-update">Loading...</span>
    </div>

    <script>
        async function updateDashboard() {
            try {
                // Update system metrics
                const health = await fetch('/health').then(r => r.json());
                document.getElementById('system-status').textContent = health.status.toUpperCase();
                document.getElementById('uptime').textContent = Math.floor(health.uptime_seconds / 60) + ' minutes';
                document.getElementById('active-tasks').textContent = health.active_tasks;
                document.getElementById('completed-tasks').textContent = health.total_tasks_completed;
                document.getElementById('memory').textContent = Math.round(health.memory_usage_mb) + ' MB';

                // Update autonomous operations
                const autonomous = await fetch('/autonomous/status').then(r => r.json());
                document.getElementById('autonomous-mode').textContent = autonomous.autonomous_mode.enabled ? 'ENABLED ‚úì' : 'DISABLED';
                const lastCheck = new Date(autonomous.autonomous_mode.last_check);
                document.getElementById('last-check').textContent = lastCheck.toLocaleTimeString();
                document.getElementById('check-interval').textContent = autonomous.autonomous_mode.check_interval_seconds + ' seconds';
                document.getElementById('actions-taken').textContent = autonomous.autonomous_mode.total_actions_taken;

                // Update optimization stats
                const optimization = await fetch('/optimization/cache-stats').then(r => r.json());
                document.getElementById('cache-size').textContent = optimization.cache.size + ' / ' + optimization.cache.max_size;
                document.getElementById('cache-hits').textContent = optimization.cache.hits;
                document.getElementById('cache-misses').textContent = optimization.cache.misses;
                document.getElementById('hit-rate').textContent = optimization.cache.hit_rate_percent.toFixed(1) + '%';

                // Update last refresh time
                document.getElementById('last-update').textContent = new Date().toLocaleTimeString();

            } catch (error) {
                console.error('Error updating dashboard:', error);
            }
        }

        // Initial update
        updateDashboard();

        // Auto-refresh every 10 seconds
        setInterval(updateDashboard, 10000);
    </script>
</body>
</html>
